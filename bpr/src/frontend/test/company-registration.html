<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPR Hub - íšŒì‚¬ ë“±ë¡</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f5f5f5; }
        
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .header { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .form-section { background: white; padding: 30px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        
        h1 { color: #2563eb; margin-bottom: 10px; }
        h2 { color: #374151; margin-bottom: 20px; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px; }
        
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; color: #374151; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 5px; font-size: 14px; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #2563eb; }
        
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        
        .btn { padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-block; text-align: center; }
        .btn-primary { background-color: #2563eb; color: white; }
        .btn-primary:hover { background-color: #1d4ed8; }
        .btn-secondary { background-color: #6b7280; color: white; }
        
        .checkbox-group { display: flex; align-items: center; gap: 10px; }
        .checkbox-group input[type="checkbox"] { width: auto; }
        
        .info-box { background-color: #eff6ff; border-left: 4px solid #2563eb; padding: 15px; margin-bottom: 20px; }
        .warning-box { background-color: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¢ BPR Hub - íšŒì‚¬ ë“±ë¡</h1>
            <p>ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ ì‹œìŠ¤í…œì— íšŒì‚¬ë¥¼ ë“±ë¡í•˜ì„¸ìš”</p>
        </div>

        <form id="companyRegistrationForm">
            <!-- íšŒì‚¬ ê¸°ë³¸ ì •ë³´ -->
            <div class="form-section">
                <h2>íšŒì‚¬ ê¸°ë³¸ ì •ë³´</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="companyName">íšŒì‚¬ëª… *</label>
                        <input type="text" id="companyName" name="companyName" required>
                    </div>
                    <div class="form-group">
                        <label for="taxNumber">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ *</label>
                        <input type="text" id="taxNumber" name="taxNumber" placeholder="123-45-67890" pattern="[0-9]{3}-[0-9]{2}-[0-9]{5}" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="businessType">ì—…ì¢…</label>
                        <select id="businessType" name="businessType">
                            <option value="">ì—…ì¢… ì„ íƒ</option>
                            <option value="manufacturing">ì œì¡°ì—…</option>
                            <option value="retail">ì†Œë§¤ì—…</option>
                            <option value="services">ì„œë¹„ìŠ¤ì—…</option>
                            <option value="technology">IT/ê¸°ìˆ </option>
                            <option value="finance">ê¸ˆìœµì—…</option>
                            <option value="construction">ê±´ì„¤ì—…</option>
                            <option value="others">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="establishmentDate">ë²•ì¸ì„¤ë¦½ì¼ì</label>
                        <input type="date" id="establishmentDate" name="establishmentDate">
                    </div>
                </div>
            </div>

            <!-- ëŒ€í‘œì ì •ë³´ -->
            <div class="form-section">
                <h2>ëŒ€í‘œì ì •ë³´</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="representativeName">ëŒ€í‘œìëª… *</label>
                        <input type="text" id="representativeName" name="representativeName" required>
                    </div>
                    <div class="form-group">
                        <label for="representativePhone">ëŒ€í‘œ ì „í™”ë²ˆí˜¸</label>
                        <input type="tel" id="representativePhone" name="representativePhone" placeholder="02-1234-5678">
                    </div>
                </div>
            </div>

            <!-- ê´€ë¦¬ì ì •ë³´ -->
            <div class="form-section">
                <h2>ê´€ë¦¬ì ì—°ë½ì²˜</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="adminEmail">ê´€ë¦¬ì ì´ë©”ì¼ *</label>
                        <input type="email" id="adminEmail" name="adminEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="adminPhone">ê´€ë¦¬ì ì „í™”ë²ˆí˜¸</label>
                        <input type="tel" id="adminPhone" name="adminPhone" placeholder="010-1234-5678">
                    </div>
                </div>
            </div>

            <!-- ì£¼ì†Œ ì •ë³´ -->
            <div class="form-section">
                <h2>ì£¼ì†Œ ì •ë³´</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="postalCode">ìš°í¸ë²ˆí˜¸</label>
                        <input type="text" id="postalCode" name="postalCode" placeholder="12345">
                    </div>
                    <div class="form-group">
                        <label for="phone">íšŒì‚¬ ì „í™”ë²ˆí˜¸</label>
                        <input type="tel" id="phone" name="phone" placeholder="02-1234-5678">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="address">ì£¼ì†Œ</label>
                    <textarea id="address" name="address" rows="3" placeholder="íšŒì‚¬ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email">íšŒì‚¬ ì´ë©”ì¼</label>
                        <input type="email" id="email" name="email">
                    </div>
                    <div class="form-group">
                        <label for="website">ì›¹ì‚¬ì´íŠ¸</label>
                        <input type="url" id="website" name="website" placeholder="https://company.com">
                    </div>
                </div>
            </div>

            <!-- ì„¤ë¦½ì ê³„ì • ì •ë³´ -->
            <div class="form-section">
                <h2>ì„¤ë¦½ì ê³„ì • ì •ë³´</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="founderEmail">ì„¤ë¦½ì ì´ë©”ì¼ *</label>
                        <input type="email" id="founderEmail" name="founderEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="founderUsername">ì‚¬ìš©ìëª… *</label>
                        <input type="text" id="founderUsername" name="founderUsername" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="founderFirstName">ì´ë¦„ *</label>
                        <input type="text" id="founderFirstName" name="founderFirstName" required>
                    </div>
                    <div class="form-group">
                        <label for="founderLastName">ì„± *</label>
                        <input type="text" id="founderLastName" name="founderLastName" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="founderPassword">ë¹„ë°€ë²ˆí˜¸ *</label>
                        <input type="password" id="founderPassword" name="founderPassword" minlength="8" required>
                    </div>
                    <div class="form-group">
                        <label for="founderPhone">ì—°ë½ì²˜</label>
                        <input type="tel" id="founderPhone" name="founderPhone" placeholder="010-1234-5678">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="founderDepartment">ë¶€ì„œ</label>
                        <input type="text" id="founderDepartment" name="founderDepartment" value="ê²½ì˜ì§„">
                    </div>
                    <div class="form-group">
                        <label for="founderJobTitle">ì§ì±…</label>
                        <input type="text" id="founderJobTitle" name="founderJobTitle" value="ëŒ€í‘œì´ì‚¬">
                    </div>
                </div>
            </div>

            <!-- ì¶”ê°€ ì˜µì…˜ -->
            <div class="form-section">
                <h2>ì¶”ê°€ ì˜µì…˜</h2>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="createDefaultDepartments" name="createDefaultDepartments" checked>
                    <label for="createDefaultDepartments">ê¸°ë³¸ ë¶€ì„œ êµ¬ì¡° ìƒì„± (ê²½ì˜ì§„, ì¸ì‚¬íŒ€, ì¬ë¬´íŒ€, ì˜ì—…íŒ€, ìš´ì˜íŒ€)</label>
                </div>
            </div>

            <!-- ì œì¶œ ë²„íŠ¼ -->
            <div class="form-section">
                <div class="info-box">
                    <strong>ì°¸ê³ :</strong> íšŒì‚¬ ë“±ë¡ í›„ êµ¬ì„±ì›ì„ ì´ˆëŒ€í•˜ê³  ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
                
                <div style="text-align: center;">
                    <button type="submit" class="btn btn-primary">íšŒì‚¬ ë“±ë¡</button>
                    <a href="index.html" class="btn btn-secondary" style="margin-left: 10px;">ì·¨ì†Œ</a>
                </div>
            </div>
        </form>
    </div>

    <script>
        document.getElementById('companyRegistrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // íšŒì‚¬ ë°ì´í„°ì™€ ì„¤ë¦½ì ë°ì´í„° ë¶„ë¦¬
            const companyData = {
                companyName: data.companyName,
                taxNumber: data.taxNumber,
                businessType: data.businessType,
                representativeName: data.representativeName,
                representativePhone: data.representativePhone,
                adminEmail: data.adminEmail,
                adminPhone: data.adminPhone,
                address: data.address,
                postalCode: data.postalCode,
                establishmentDate: data.establishmentDate,
                phone: data.phone,
                email: data.email,
                website: data.website
            };
            
            const founderData = {
                email: data.founderEmail,
                username: data.founderUsername,
                password: data.founderPassword,
                firstName: data.founderFirstName,
                lastName: data.founderLastName,
                phone: data.founderPhone,
                department: data.founderDepartment,
                jobTitle: data.founderJobTitle,
                createDefaultDepartments: data.createDefaultDepartments === 'on'
            };
            
            try {
                // ì‹¤ì œ API í˜¸ì¶œ
                const response = await fetch('/api/companies/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ companyData, founderData })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    alert('íšŒì‚¬ ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                    // ì„±ê³µ í˜ì´ì§€ë¡œ ì´ë™ ë˜ëŠ” ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
                    window.location.href = 'company-dashboard.html';
                } else {
                    alert('ë“±ë¡ ì‹¤íŒ¨: ' + result.message);
                }
            } catch (error) {
                console.error('ë“±ë¡ ì˜¤ë¥˜:', error);
                alert('ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            }
        });

        // ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ìë™ í¬ë§·íŒ…
        document.getElementById('taxNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9]/g, '');
            if (value.length >= 3) {
                value = value.slice(0, 3) + '-' + value.slice(3);
            }
            if (value.length >= 6) {
                value = value.slice(0, 6) + '-' + value.slice(6, 11);
            }
            e.target.value = value;
        });
    </script>
</body>
</html>