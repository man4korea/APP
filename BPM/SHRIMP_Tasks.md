<!-- 📁 C:\xampp\htdocs\BPM\SHRIMP_Tasks.md -->
<!-- Create at 2508021941 Ver1.01 -->

# BPM Total Business Process Management - SHRIMP 작업 관리

## 프로젝트 개요
- **프로젝트명**: Total Business Process Management SaaS
- **생성일**: 2025년 8월 2일
- **총 작업 수**: 16개 (기존 8개 + 기반환경 8개)
- **진행 상태**: 1개 완료, 15개 대기중

## 작업 현황

### 📊 상태별 요약
- **진행중 (in_progress)**: 0개
- **대기중 (pending)**: 15개
- **완료 (completed)**: 1개
- **차단 (blocked)**: 0개

---

## 📋 작업 목록

### 1. BPR 프로젝트 BPM 통합 및 기반 환경 구축
**ID**: `b8288ac6-6fa8-4b2a-a76a-1eff8eef8452`  
**상태**: ✅ 완료  
**의존성**: 없음
**완료일**: 2025-08-02  
**Git 커밋**: `317f4da` - feat: [b8288ac6] BPR 프로젝트 BPM 통합 및 기반 환경 구축 완료

**설명**: BPR 폴더의 멀티테넌트 데이터베이스 스키마와 핵심 코드를 BPM 폴더로 이전하고, TGP 웹서버 환경 설정을 활용하여 통합 개발 환경을 구축합니다. 기존 검증된 아키텍처를 재사용하여 개발 시간을 단축합니다.

**✅ 완료 로그**:
📁 **생성 파일**: 
- C:\xampp\htdocs\BPM\sql\schema.sql (19KB 멀티테넌트 DB 스키마)
- C:\xampp\htdocs\BPM\includes\config.php (15.6KB 고급 설정 시스템)
- C:\xampp\htdocs\BPM\composer.json (PSR-4 오토로딩 및 의존성 관리)
- C:\xampp\htdocs\BPM\core\Security.php (JWT, CSRF, 암호화 시스템)
- C:\xampp\htdocs\BPM\core\Router.php (RESTful API 라우팅 및 미들웨어)
- C:\xampp\htdocs\BPM\core\bootstrap.php (시스템 초기화 및 헬퍼 함수)
- C:\xampp\htdocs\BPM\index.php (메인 엔트리 포인트)

📝 **주요 변경사항**:
- BPR 스키마를 BPM으로 이전 완료 (bmp_ → bpm_ 테이블 프리픽스)
- 멀티테넌트 아키텍처 완성 (회사별 데이터 분리)
- JWT 기반 인증 시스템 구축 (Argon2ID 비밀번호 해싱)
- CSRF 보호 및 XSS 방지 보안 시스템
- RESTful API 라우팅 및 미들웨어 시스템
- PSR-4 오토로딩 및 Composer 의존성 관리

🔗 **Git 백업**: GitHub 및 OneDrive 동기화 완료

**구현 가이드**:
1. BPR 폴더 이전: database/multitenant_schema.sql을 BPM/sql/schema.sql로 복사하고 테이블명을 bpm_로 변경
2. TGP 설정 확장: TGP의 includes/config.php를 기반으로 BPM/includes/config.php 생성하여 멀티테넌트 기능 추가
3. .env 설정: TGP의 .env 구조를 참고하여 BPM 전용 데이터베이스 설정 구성
4. 기본 폴더 구조: core/, modules/, shared/, assets/ 디렉토리 생성 및 .gitignore 설정
5. Composer 초기화: composer.json 생성 및 기본 PHP 의존성 설정
6. Node.js/NPM 초기화: package.json 생성 및 프론트엔드 빌드 도구 설정
7. 보안 설정: JWT, CSRF, 세션 보안 기본 구성
8. API 라우팅 기반: RESTful API 구조 및 미들웨어 시스템 구축

**검증 기준**: 데이터베이스 스키마가 정상 생성되고, TGP 기반 설정이 BPM에서 올바르게 작동하며, 기본 폴더 구조가 완성되어 브라우저에서 기본 페이지가 정상 표시

**관련 파일**:
- `C:\xampp\htdocs\bpr\database\multitenant_schema.sql` (참조)
- `C:\xampp\htdocs\TGP\includes\config.php` (참조)
- `C:\xampp\htdocs\BPM\sql\schema.sql` (생성)
- `C:\xampp\htdocs\BPM\includes\config.php` (생성)
- `C:\xampp\htdocs\BPM\.env` (생성)

---

### 2. 모듈형 테마 시스템 및 네비게이션 개발
**ID**: `7fff85c6-d241-4227-980f-de4abb8af3a5`  
**상태**: ⏳ 대기중  
**의존성**: 작업 1 완료 후  

**설명**: 10개 모듈별 무지개 색상 테마 시스템을 구축하고, 상단 모듈 선택 네비게이션을 개발합니다. CSS 변수 기반 동적 테마 전환과 모듈별 독립 실행을 지원하는 라우팅 시스템을 구현합니다.

**모듈별 색상 테마**:
- 🔴 조직관리 (빨강) - #ff6b6b
- 🟠 구성원관리 (주황) - #ff9f43
- 🟡 Task관리 (노랑) - #feca57
- 🟢 문서관리 (초록) - #55a3ff
- 🔵 Process Map관리 (파랑) - #3742fa
- 🟣 업무Flow관리 (보라) - #a55eea
- 🟤 직무분석 (갈색) - #8b4513
- ⚫ 업무혁신관리 (검정) - #2f3542
- ⚪ 인사관리 (흰색) - #f1f2f6
- 🩷 목표성과관리 (핑크) - #ff6b9d

---

### 3. 사용자 인증 및 멀티테넌트 권한 시스템 개발
**ID**: `14810686-791d-4448-869d-a1b5143ee28e`  
**상태**: ⏳ 대기중  
**의존성**: 작업 2 완료 후  

**설명**: BPR의 4단계 권한 시스템(founder/admin/process_owner/member)을 확장하여 TGP 스타일 인증과 통합합니다. 회사별 데이터 분리와 모듈별 권한 제어를 구현합니다.

**권한 레벨**:
1. **Founder** (창립자) - 모든 권한
2. **Admin** (관리자) - 회사 관리 권한
3. **Process Owner** (프로세스 담당자) - 프로세스 관리 권한
4. **Member** (구성원) - 기본 사용 권한

---

### 4. 조직관리 모듈 개발 (빨강 테마)
**ID**: `a6bd1d09-469a-4ed6-bd05-c8a496bc2611`  
**상태**: ⏳ 대기중  
**의존성**: 작업 3 완료 후  

**설명**: 첫 번째 핵심 모듈인 조직관리를 개발합니다. 회사/부서 계층구조 관리, 조직도 시각화, 본점-지점 통합 승인 시스템을 구현하며 빨강 색상 테마를 적용합니다.

**주요 기능**:
- 회사 및 부서 CRUD 관리
- 무제한 깊이 계층구조 지원
- 조직도 시각화 (D3.js 또는 CSS)
- 본점-지점 통합 승인 시스템
- 드래그 앤 드롭 조직 편집

---

### 5. 구성원관리 모듈 개발 (주황 테마)
**ID**: `387daf1a-92de-4457-a82e-f74911a6441e`  
**상태**: ⏳ 대기중  
**의존성**: 작업 4 완료 후  

**설명**: 두 번째 핵심 모듈인 구성원관리를 개발합니다. 사용자 초대/등록, 권한 할당, 부서 배치, 인사이동 처리 기능을 구현하며 주황 색상 테마를 적용합니다.

**주요 기능**:
- 이메일 기반 사용자 초대
- 권한 할당 및 관리
- 부서 배치 및 인사이동
- 인사이력 추적 시스템

---

### 6. Task관리 모듈 개발 (노랑 테마)
**ID**: `241eb587-4819-4d47-8746-dac240dd95ac`  
**상태**: ⏳ 대기중  
**의존성**: 작업 5 완료 후  

**설명**: 세 번째 핵심 모듈인 Task관리를 개발합니다. 업무 등록/분류, 담당자 할당, 시간 추적(PT/LT/TPT), 업무 분석 리포트 기능을 구현하며 노랑 색상 테마를 적용합니다.

**주요 기능**:
- Task CRUD 및 분류 시스템
- DB/CM/DM 타입별 분류
- PT/LT/TPT 시간 추적
- 담당자 할당 및 워크로드 분산
- 업무 분석 리포트 생성

---

### 7. 문서관리 모듈 개발 (초록 테마)
**ID**: `abbb6938-f676-4816-b09a-2e570f867199`  
**상태**: ⏳ 대기중  
**의존성**: 작업 6 완료 후  

**설명**: 네 번째 모듈인 문서관리를 개발합니다. 파일 업로드/다운로드, 문서 분류, 버전 관리, 템플릿 시스템을 구현하며 초록 색상 테마를 적용합니다.

**주요 기능**:
- 파일 업로드/다운로드/미리보기
- 문서 분류 및 태그 시스템
- 버전 관리 및 변경 이력
- 템플릿 시스템 및 자동 생성
- 문서별 권한 제어

---

### 8. 통합 대시보드 및 SaaS 기반 기능 개발
**ID**: `fb3b69fc-5cd4-4c39-9e03-326a4e39693e`  
**상태**: ⏳ 대기중  
**의존성**: 작업 7 완료 후  

**설명**: 모든 모듈을 통합하는 메인 대시보드를 개발하고, 상업용 SaaS 확장을 위한 구독 관리, 사용량 추적, 결제 시스템 기반을 구축합니다.

**주요 기능**:
- 통합 메인 대시보드
- 구독 관리 (무료/프리미엄/엔터프라이즈)
- 사용량 추적 및 분석
- 결제 시스템 기반 (Stripe 연동 준비)
- 모듈별 설정 및 활성화 관리

---

## 🛠️ 추가 기반 환경 구축 작업

### 9. 고급 보안 및 인증 시스템 구축
**ID**: `sec-9a1b2c3d-4e5f-6789-abcd-ef0123456789`  
**상태**: ⏳ 대기중  
**의존성**: 작업 3 완료 후  

**설명**: JWT 토큰 기반 API 인증, CSRF 보호, XSS 방지, SQL 인젝션 방지 등 포괄적인 보안 시스템을 구축합니다.

**주요 기능**:
- JWT 토큰 시스템 구현
- CSRF 보호 미들웨어
- 입력 검증 라이브러리 구축
- 비밀번호 암호화 시스템
- 보안 세션 관리

---

### 10. API 라우팅 및 미들웨어 시스템 개발
**ID**: `api-10b2c3d4-5e6f-7890-bcde-f12345678901`  
**상태**: ⏳ 대기중  
**의존성**: 작업 9 완료 후  

**설명**: RESTful API 구조, 라우팅 시스템, 권한 검증 미들웨어, CORS 설정 등 API 기반 시스템을 구축합니다.

**주요 기능**:
- RESTful API 엔드포인트 구조
- 동적 라우팅 시스템
- 권한 검증 미들웨어
- CORS 및 API 버전 관리
- API 문서 자동 생성

---

### 11. 데이터베이스 고도화 및 최적화
**ID**: `db-11c3d4e5-6f78-9012-cdef-234567890123`  
**상태**: ⏳ 대기중  
**의존성**: 작업 1 완료 후  

**설명**: 마이그레이션 시스템, 시드 데이터, 인덱스 최적화, 자동 백업 시스템을 구축하여 데이터베이스 관리를 체계화합니다.

**주요 기능**:
- 스키마 마이그레이션 시스템
- 테스트용 시드 데이터 생성
- 성능 최적화 인덱스 설계
- 자동 백업/복구 시스템
- 데이터베이스 버전 관리

---

### 12. 로깅 및 모니터링 시스템 구축
**ID**: `log-12d4e5f6-7890-1234-def0-345678901234`  
**상태**: ⏳ 대기중  
**의존성**: 작업 10 완료 후  

**설명**: 포괄적인 로깅 시스템, 성능 모니터링, 디버깅 도구, 시스템 헬스체크 기능을 구축합니다.

**주요 기능**:
- 다층 로그 시스템 (에러, 정보, 디버그)
- 실시간 성능 모니터링
- 개발용 디버깅 도구
- 시스템 상태 헬스체크
- 로그 분석 및 알림

---

### 13. 파일 및 미디어 관리 시스템
**ID**: `file-13e5f678-9012-3456-f012-456789012345`  
**상태**: ⏳ 대기중  
**의존성**: 작업 11 완료 후  

**설명**: 파일 업로드, 썸네일 생성, 권한 관리, CDN 준비 등 종합적인 파일 관리 시스템을 구축합니다.

**주요 기능**:
- 다중 파일 업로드 시스템
- 이미지 자동 리사이즈/썸네일
- 파일별 권한 관리
- 정적 파일 CDN 준비
- 파일 버전 관리

---

### 14. 이메일 및 알림 시스템 구축
**ID**: `mail-14f67890-1234-5678-0123-567890123456`  
**상태**: ⏳ 대기중  
**의존성**: 작업 12 완료 후  

**설명**: SMTP 기반 이메일 발송, 템플릿 시스템, 푸시 알림, 백그라운드 큐 처리 시스템을 구축합니다.

**주요 기능**:
- SMTP 이메일 발송 시스템
- 반응형 이메일 템플릿
- 실시간 푸시 알림
- 백그라운드 큐 시스템
- 알림 환경설정 관리

---

### 15. 테스트 자동화 및 CI/CD 시스템
**ID**: `test-15678901-2345-6789-1234-678901234567`  
**상태**: ⏳ 대기중  
**의존성**: 작업 13 완료 후  

**설명**: 유닛 테스트, 통합 테스트, 자동화된 CI/CD 파이프라인을 구축하여 코드 품질을 보장합니다.

**주요 기능**:
- PHPUnit 기반 유닛 테스트
- Playwright 통합 테스트 확장
- 독립적인 테스트 데이터베이스
- 자동화된 배포 파이프라인
- 코드 커버리지 분석

---

### 16. 성능 최적화 및 캐싱 시스템
**ID**: `perf-16789012-3456-7890-2345-789012345678`  
**상태**: ⏳ 대기중  
**의존성**: 작업 14 완료 후  

**설명**: Redis 캐싱, 데이터베이스 쿼리 최적화, 정적 파일 압축, CDN 연동 등 종합적인 성능 최적화를 구현합니다.

**주요 기능**:
- Redis 기반 캐싱 시스템
- 데이터베이스 쿼리 최적화
- CSS/JS 압축 및 번들링
- 이미지 최적화 및 지연 로딩
- CDN 연동 준비

---

## 🎯 개발 로드맵 (총 16개 작업)

### Phase 1: 기반 구축 (작업 1-3, 9-11)
- **핵심 기반** (작업 1-3)
  - 기반 환경 구축
  - 테마 시스템 개발  
  - 인증 및 권한 시스템
- **고급 기반** (작업 9-11)
  - 고급 보안 시스템
  - API 라우팅 시스템
  - 데이터베이스 고도화

### Phase 2: 핵심 모듈 (작업 4-7)
- 조직관리 (🔴 빨강 테마)
- 구성원관리 (🟠 주황 테마)
- Task관리 (🟡 노랑 테마)
- 문서관리 (🟢 초록 테마)

### Phase 3: 운영 시스템 (작업 12-15)
- 로깅 및 모니터링
- 파일 및 미디어 관리
- 이메일 및 알림 시스템
- 테스트 자동화 및 CI/CD

### Phase 4: 통합 및 최적화 (작업 8, 16)
- 통합 대시보드 및 SaaS 기능
- 성능 최적화 및 캐싱

---

## 📝 추가 확장 모듈 계획

향후 추가할 모듈들:
- 🔵 **Process Map관리** (파랑 테마) - 시각적 프로세스 매핑
- 🟣 **업무Flow관리** (보라 테마) - BPR/BPM 워크플로우
- 🟤 **직무분석** (갈색 테마) - 업무시간/효율성 분석
- ⚫ **업무혁신관리** (검정 테마) - 혁신 프로젝트 관리
- ⚪ **인사관리** (흰색 테마) - 인사평가/급여 관리
- 🩷 **목표성과관리** (핑크 테마) - KPI/OKR 관리

---

## 🔄 작업 진행 방법

1. **순차적 진행**: 의존성에 따라 순서대로 진행
2. **단계별 검증**: 각 작업 완료 후 검증 기준 확인
3. **문서 업데이트**: 진행상황을 본 문서에 지속 업데이트
4. **피드백 반영**: 각 단계별 검토 및 수정사항 반영

---

## 🔧 작업 관리 지침 (Claude AI 전용)

### 📝 작업 계획 관리
1. **새 작업 추가시**: 본 문서의 "작업 목록" 섹션에 새로운 작업을 추가하고 ID를 부여
2. **작업 수정시**: 해당 작업의 설명, 의존성, 구현 가이드를 수정
3. **상태 업데이트**: 작업 진행상황을 실시간으로 반영 (⏳대기중 → 🟡진행중 → ✅완료)

### 🔄 Git 연동 규칙
각 작업 완료시마다 다음 순서로 Git 커밋 및 푸시:

```bash
# 1. 변경사항 스테이징
git add .

# 2. 커밋 (작업 ID와 제목 포함)
git commit -m "feat: [작업ID] 작업제목 완료

- 주요 변경사항 1
- 주요 변경사항 2  
- 주요 변경사항 3

관련 파일:
- 생성된 파일들 나열
- 수정된 파일들 나열

검증 완료: ✅"

# 3. 원격 저장소에 푸시
git push origin main
```

### 📊 진행상황 추적
- **작업 시작시**: 상태를 🟡진행중으로 변경
- **작업 완료시**: 상태를 ✅완료로 변경하고 완료 날짜 기록
- **차단시**: 상태를 🔴차단으로 변경하고 차단 사유 기록

### 🎯 작업 완료 체크리스트
각 작업 완료시 다음을 확인:
1. ✅ 구현 가이드의 모든 단계 완료
2. ✅ 검증 기준 모두 통과
3. ✅ 관련 파일들 정상 생성/수정
4. ✅ SHRIMP_Tasks.md 상태 업데이트
5. ✅ Git 커밋 및 푸시 완료
6. ✅ 다음 작업의 의존성 해제

### 📁 파일 헤더 표준화 (필수)
**모든 파일 생성시 반드시 적용:**

```
// 📁 [전체경로]/[파일명]
// Create at YYMMDDhhmm Ver1.00
```

**적용 규칙:**
- **JSON 파일 제외**: package.json 등은 헤더 없음
- **MD 파일**: HTML 주석 형태 `<!-- -->`
- **기타 파일**: `//` 주석 형태
- **동경시각 기준**: JST (UTC+9) 시간으로 작성
- **버전 관리**: 수정시 뒷자리 증가, 전면 개편시 앞자리 증가

**예시:**
```html
<!-- 📁 C:\xampp\htdocs\BPM\modules\organization\index.php -->
<!-- Create at 2508021945 Ver1.00 -->
```

```javascript
// 📁 C:\xampp\htdocs\BPM\assets\js\common.js  
// Create at 2508021945 Ver1.00
```

### 📁 파일 경로 규칙
- **절대 경로 사용**: `C:\xampp\htdocs\BPM\`로 시작
- **상대 경로 금지**: 작업 디렉토리 혼란 방지
- **폴더 구조 준수**: 계획된 폴더 구조 내에서만 파일 생성

### 🧪 테스트 자동화 (Playwright/Puppeteer)
화면 개발 완료시 로컬 XAMPP 환경에서 자동 테스트:

```javascript
// 기본 테스트 스크립트 예시
const { chromium } = require('playwright');

async function testBPMModule(moduleName, moduleColor) {
  const browser = await chromium.launch();
  const page = await browser.newPage();
  
  // 1. 로컬 XAMPP 서버 접속
  await page.goto('http://localhost/BPM/');
  
  // 2. 모듈 접근 테스트
  await page.click(`[data-module="${moduleName}"]`);
  
  // 3. 테마 색상 확인
  const bgColor = await page.locator('body').evaluate(el => 
    getComputedStyle(el).backgroundColor
  );
  
  // 4. 기본 기능 테스트
  await page.waitForSelector('.module-content');
  
  // 5. 스크린샷 저장
  await page.screenshot({ 
    path: `tests/screenshots/${moduleName}.png` 
  });
  
  await browser.close();
  console.log(`✅ ${moduleName} 모듈 테스트 완료`);
}
```

### 🔄 배포 자동화 워크플로우
에러 없이 테스트 통과시 자동 배포:

```bash
# 1. 로컬 테스트 (XAMPP + MySQL)
echo "🧪 로컬 테스트 시작..."
node tests/playwright-test.js

# 2. 테스트 성공시 배포 진행
if [ $? -eq 0 ]; then
  echo "✅ 테스트 통과 - 배포 시작"
  
  # 3. OneDrive 동기화 (다른 노트북 작업 연속성)
  echo "📁 OneDrive 복사 중..."
  xcopy "C:\xampp\htdocs\BPM\*" "C:\Users\man4k\OneDrive\문서\APP\bpm\" /E /Y /I
  
  # 4. 웹서버 배포
  echo "🌐 웹서버 배포 중..."
  xcopy "C:\xampp\htdocs\BPM\*" "Z:\html\bpm\" /E /Y /I
  
  echo "🚀 배포 완료!"
else
  echo "❌ 테스트 실패 - 배포 중단"
  exit 1
fi
```

### 📂 배포 경로 설정
- **로컬 개발**: `C:\xampp\htdocs\BPM\`
- **OneDrive 백업**: `C:\Users\man4k\OneDrive\문서\APP\bpm\`  
- **웹서버 배포**: `Z:\html\bpm\`

### 🚨 주의사항
1. **작업 순서 준수**: 의존성 없는 작업부터 진행
2. **단일 작업 집중**: 한 번에 하나의 작업만 진행
3. **검증 필수**: 각 작업의 검증 기준 반드시 확인
4. **문서 동기화**: 모든 변경사항을 SHRIMP_Tasks.md에 반영
5. **테스트 필수**: 화면 개발시 Playwright/Puppeteer 테스트 통과 필수
6. **배포 안전성**: 테스트 실패시 배포 자동 중단

### 🏷️ 작업 상태 아이콘
- ⏳ **대기중 (pending)**: 의존성 작업 완료 대기
- 🟡 **진행중 (in_progress)**: 현재 개발 진행중
- ✅ **완료 (completed)**: 검증 완료 및 Git 푸시 완료
- 🔴 **차단 (blocked)**: 문제 발생으로 진행 불가
- ⚠️ **검토 필요 (review_needed)**: 사용자 검토 필요

### 📊 완료 로그 기록 형식
작업 완료시 다음 형식으로 기록:

```
✅ 완료일: 2025-08-02
📁 생성 파일: 
- C:\xampp\htdocs\BPM\sql\schema.sql
- C:\xampp\htdocs\BPM\includes\config.php
📝 주요 변경사항:
- BPR 스키마를 BPM으로 이전 완료
- 멀티테넌트 테이블 구조 확립
🔗 Git 커밋: [커밋 해시] feat: [b8288ac6] BPR 프로젝트 BPM 통합 완료
```

---

*마지막 업데이트: 2025년 8월 2일*